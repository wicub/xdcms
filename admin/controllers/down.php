<?php	class down extends CI_Controller{		public function __construct(){			parent::__construct();			$this->load->model('down_model','down');					}						public function adddownload(){			$this->load->view('content/adddownload');		}								public function showindex($num=''){			$this->load->library('pagination');			//$a=$this->down->countnum();			//echo $a;exit;			$config['base_url']='/project/cmscode/admin/index.php/down/showindex';			$config['total_rows']=$this->down->countnum(); //总数			$config['per_page']=3; //每页显示数量			$config['num_links']=3;//连接前后显示个数			$config['prev_link']='上一页';						$config['next_link']='下一页';						$config['full_tag_open']='<div class="pagination">';			$config['full_tag_close']='</div>';						$this->pagination->initialize($config);//配置分页			//$data['post']=$this->db->get('xd_download',$config['per_page'],$num);						$list=$this->down->showindex('download',$config['per_page'],$num);			$data=array('list'=>$list);			$this->load->view('content/download',$data);					}										public function downform(){						$bool=$this->down->insertdata();			if($bool==true){				//ob_start();				//echo "<script>alert('更新成功');</script>";				redirect('down/showindex');			}else{								redirect('down/showindex');			}		}				public function edit(){			$id=$this->uri->segment(3);			$list=$this->down->showedit($id);			$data=array('list'=>$list);			$this->load->view('content/editdownload',$data);		}				public function downupdate(){			$bool=$this->down->updatedata();			if($bool==true){								redirect('down/showindex');			}else{								redirect('down/showindex');			}		}				public function downdel(){			$id=$this->uri->segment(3);			$query=$this->down->showedit($id);			$file=$query->fileurl;			$delfile='../uploads/'.$file;			$bool=$this->down->downdelete($id);			if($bool==true){								@unlink($delfile);				redirect('down/showindex');			}else{								redirect('down/showindex');			}		}			}